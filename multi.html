<!DOCTYPE html>
<html>
<head>
  <title>Minesweeper Cricket - Multiplayer</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
  <h1>Minesweeper Cricket - Multiplayer</h1>
  <form id="playerForm">
    <label for="numPlayers">Enter the number of players:</label>
    <input type="number" id="numPlayers" min="1">
    <button type="submit">Start Game</button>
  </form>

  <div id="gameContainer" style="display: none;">
    <h2 id="playerName"></h2>
    <div id="gameBoard"></div>
    <p id="score"></p>
    <button id="resetButton" style="display: none;">Reset Game</button>
    <button id="scorecardButton" style="display: none;">Show Scorecard</button>
  </div>

  <script src="script.js"></script>
  <script>
    // Wait for the document to be fully loaded
    document.addEventListener("DOMContentLoaded", function() {
      const playerForm = document.getElementById("playerForm");
      const gameContainer = document.getElementById("gameContainer");
      const playerName = document.getElementById("playerName");
      const gameBoard = document.getElementById("gameBoard");
      const score = document.getElementById("score");
      const resetButton = document.getElementById("resetButton");
      const scorecardButton = document.getElementById("scorecardButton");

      let currentPlayer = 0;
      let players = [];
      let gameOver = false;

      // Function to start the game
      function startGame() {
        const numPlayers = parseInt(document.getElementById("numPlayers").value);
        if (isNaN(numPlayers) || numPlayers < 1) {
          alert("Please enter a valid number of players.");
          return;
        }

        // Hide the player form
        playerForm.style.display = "none";
        // Show the game container
        gameContainer.style.display = "block";

        // Generate name input fields for each player
        for (let i = 0; i < numPlayers; i++) {
          const name = prompt(`Enter the name of Player ${i + 1}:`);
          if (name.trim() === "") {
            alert("Please enter a valid name for each player.");
            return;
          }
          players.push({ name: name, score: 0 });
        }

        // Start the game for the first player
        currentPlayer = 0;
        playerName.textContent = `${players[currentPlayer].name}'s Turn`;
        startNewGame();
      }

      // Function to handle game over
      function handleGameOver() {
        // Update the score of the current player
        players[currentPlayer].score = game.score;
        score.textContent = `${players[currentPlayer].name} Score: ${game.score}`;

        // Display game over message and current player's score
        alert(`Game Over! ${players[currentPlayer].name} Score is: ${game.score}`);

        // Check if all players have finished playing
        if (currentPlayer === players.length - 1) {
          // Show the scorecard button and hide the reset button
          resetButton.style.display = "none";
          scorecardButton.style.display = "block";
        } else {
          // Reset the game for the next player
          currentPlayer++;
          playerName.textContent = `${players[currentPlayer].name}'s Turn`;
          startNewGame();
        }
      }

      // Function to reset the game
      function resetGame() {
        game.reset();
        score.textContent = `${players[currentPlayer].name} Score: ${game.score}`;
      }

      // Function to show the scorecard
      function showScorecard() {
        // Create a table for the scorecard
        const table = document.createElement("table");
        const thead = document.createElement("thead");
        const tbody = document.createElement("tbody");

        // Create the table header
        const headerRow = document.createElement("tr");
        const nameHeader = document.createElement("th");
        nameHeader.textContent = "Player Name";
        const scoreHeader = document.createElement("th");
        scoreHeader.textContent = "Score";
        headerRow.appendChild(nameHeader);
        headerRow.appendChild(scoreHeader);
        thead.appendChild(headerRow);

        // Create table rows for each player
        players.forEach((player) => {
          const row = document.createElement("tr");
          const nameCell = document.createElement("td");
          nameCell.textContent = player.name;
          const scoreCell = document.createElement("td");
          scoreCell.textContent = player.score;
          row.appendChild(nameCell);
          row.appendChild(scoreCell);
          tbody.appendChild(row);
        });

        // Add the table to the container
        table.appendChild(thead);
        table.appendChild(tbody);
        gameContainer.innerHTML = "";
        gameContainer.appendChild(table);

        // Show the reset button and hide the scorecard button
        resetButton.style.display = "block";
        scorecardButton.style.display = "none";
      }

      // Add event listener to the player form
      playerForm.addEventListener("submit", function(event) {
        event.preventDefault();
        startGame();
      });

      // Add event listener to the reset button
      resetButton.addEventListener("click", function() {
        resetGame();
      });

      // Add event listener to the scorecard button
      scorecardButton.addEventListener("click", function() {
        showScorecard();
      });
    });
  </script>
</body>
</html>
